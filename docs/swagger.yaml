basePath: /api/v1
definitions:
  AdFormat:
    properties:
      feed_hours:
        type: integer
      format_type:
        $ref: '#/definitions/AdFormatType'
      is_native:
        type: boolean
      price_nano_ton:
        type: integer
      top_hours:
        type: integer
    type: object
  AdFormatResponse:
    properties:
      feed_hours:
        type: integer
      format_type:
        $ref: '#/definitions/AdFormatType'
      id:
        type: string
      is_native:
        type: boolean
      price_nano_ton:
        type: integer
      top_hours:
        type: integer
    type: object
  AdFormatType:
    enum:
    - post
    - repost
    - story
    type: string
    x-enum-varnames:
    - AdFormatTypePost
    - AdFormatTypeRepost
    - AdFormatTypeStory
  AdFormatsResponse:
    properties:
      ad_formats:
        items:
          $ref: '#/definitions/AdFormatResponse'
        type: array
    type: object
  AddAdFormatRequest:
    properties:
      feed_hours:
        enum:
        - 12
        - 24
        type: integer
      format_type:
        $ref: '#/definitions/AdFormatType'
      is_native:
        type: boolean
      price_nano_ton:
        type: integer
      top_hours:
        enum:
        - 2
        - 4
        type: integer
    required:
    - feed_hours
    - format_type
    - price_nano_ton
    - top_hours
    type: object
  AddManagerRequest:
    properties:
      telegram_id:
        type: integer
    required:
    - telegram_id
    type: object
  AuthRequest:
    properties:
      init_data:
        type: string
    type: object
  AuthResponse:
    properties:
      token:
        type: string
      user:
        $ref: '#/definitions/UserResponse'
    type: object
  ChannelAdmin:
    properties:
      first_name:
        type: string
      last_name:
        type: string
      telegram_id:
        type: integer
      username:
        type: string
    type: object
  ChannelAdminsResponse:
    properties:
      admins:
        items:
          $ref: '#/definitions/ChannelAdmin'
        type: array
    type: object
  ChannelManagersResponse:
    properties:
      managers:
        items:
          $ref: '#/definitions/ManagerResponse'
        type: array
    type: object
  ChannelResponse:
    properties:
      id:
        type: integer
      is_listed:
        type: boolean
      photo_big_url:
        type: string
      photo_small_url:
        type: string
      subscribers:
        type: integer
      title:
        type: string
      username:
        type: string
    type: object
  ChannelRoleType:
    enum:
    - undefined
    - owner
    - manager
    type: string
    x-enum-varnames:
    - ChannelRoleTypeUndefined
    - ChannelRoleTypeOwner
    - ChannelRoleTypeManager
  ChannelSortBy:
    enum:
    - subscribers
    - views
    type: string
    x-enum-varnames:
    - ChannelSortBySubscribers
    - ChannelSortByViews
  ChannelWithRoleResponse:
    properties:
      channel:
        $ref: '#/definitions/ChannelResponse'
      role:
        $ref: '#/definitions/ChannelRoleType'
    type: object
  ChannelsResponse:
    properties:
      channels:
        items:
          $ref: '#/definitions/ChannelWithRoleResponse'
        type: array
    type: object
  ErrorResponse:
    properties:
      details:
        additionalProperties: {}
        type: object
      error_code:
        type: string
    type: object
  Language:
    enum:
    - en
    - ru
    type: string
    x-enum-varnames:
    - LanguageEN
    - LanguageRU
  LanguageShare:
    properties:
      language:
        type: string
      percentage:
        type: number
    type: object
  ManagerResponse:
    properties:
      created_at:
        type: string
      name:
        type: string
      role:
        $ref: '#/definitions/ChannelRoleType'
      telegram_id:
        type: integer
    type: object
  MarketplaceChannel:
    properties:
      about:
        type: string
      ad_formats:
        items:
          $ref: '#/definitions/AdFormat'
        type: array
      avg_daily_views_1d:
        type: integer
      avg_daily_views_7d:
        type: integer
      avg_daily_views_30d:
        type: integer
      avg_interactions_7d:
        type: integer
      avg_interactions_30d:
        type: integer
      engagement_rate_7d:
        type: number
      engagement_rate_30d:
        type: number
      id:
        type: integer
      languages:
        description: 'ISO 639-1 codes: "en", "ru"'
        items:
          $ref: '#/definitions/LanguageShare'
        type: array
      photo_small_url:
        type: string
      reactions_by_emotion:
        additionalProperties:
          type: integer
        description: "Keys are unicode emoji (\"\U0001F44D\"), custom will be mapped
          to standard too"
        type: object
      story_reactions_by_emotion:
        additionalProperties:
          type: integer
        type: object
      sub_growth_7d:
        type: integer
      sub_growth_30d:
        type: integer
      subscribers:
        type: integer
      title:
        type: string
      top_hours:
        description: Views per hour (index 0â€“23, UTC)
        items:
          type: number
        type: array
      total_views_7d:
        type: integer
      total_views_30d:
        type: integer
      username:
        type: string
    type: object
  MarketplaceChannelsRequest:
    properties:
      filters:
        items:
          $ref: '#/definitions/MarketplaceFilter'
        type: array
      page:
        type: integer
      sort_by:
        $ref: '#/definitions/ChannelSortBy'
      sort_order:
        $ref: '#/definitions/SortOrder'
    type: object
  MarketplaceChannelsResponse:
    properties:
      channels:
        items:
          $ref: '#/definitions/MarketplaceChannel'
        type: array
      total:
        type: integer
    type: object
  MarketplaceFilter:
    properties:
      name:
        type: string
      value: {}
    type: object
  PreferredMode:
    enum:
    - publisher
    - advertiser
    type: string
    x-enum-varnames:
    - PreferredModePublisher
    - PreferredModeAdvertiser
  ProfileResponse:
    properties:
      language:
        $ref: '#/definitions/Language'
      name:
        type: string
      onboarding_finished:
        type: boolean
      preferred_mode:
        $ref: '#/definitions/PreferredMode'
      receive_notifications:
        type: boolean
      telegram_id:
        type: integer
      theme:
        $ref: '#/definitions/Theme'
    type: object
  SortOrder:
    enum:
    - asc
    - desc
    type: string
    x-enum-varnames:
    - SortOrderAsc
    - SortOrderDesc
  Theme:
    enum:
    - light
    - dark
    - auto
    type: string
    x-enum-varnames:
    - ThemeLight
    - ThemeDark
    - ThemeAuto
  TonRatesResponse:
    properties:
      eur:
        type: number
      gbp:
        type: number
      rub:
        type: number
      usd:
        type: number
    type: object
  UpdateListingRequest:
    properties:
      is_listed:
        type: boolean
    type: object
  UpdateNameRequest:
    properties:
      name:
        type: string
    required:
    - name
    type: object
  UpdateSettingsRequest:
    properties:
      language:
        $ref: '#/definitions/Language'
      onboarding_finished:
        type: boolean
      preferred_mode:
        $ref: '#/definitions/PreferredMode'
      receive_notifications:
        type: boolean
      theme:
        $ref: '#/definitions/Theme'
    type: object
  UserResponse:
    properties:
      name:
        type: string
      telegram_id:
        type: integer
    type: object
info:
  contact: {}
  title: Ad Marketplace API
  version: "1.0"
paths:
  /auth:
    post:
      consumes:
      - application/json
      parameters:
      - description: Telegram init data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/AuthRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/AuthResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: Authenticate user
      tags:
      - auth
  /channels:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/ChannelsResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: List user channels
      tags:
      - channels
  /channels/{TgChannelID}:
    get:
      parameters:
      - description: Telegram channel ID
        in: path
        name: TgChannelID
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/ChannelResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get channel
      tags:
      - channels
  /channels/{TgChannelID}/ad-formats:
    get:
      parameters:
      - description: Telegram channel ID
        in: path
        name: TgChannelID
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/AdFormatsResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get channel ad formats
      tags:
      - channels
    post:
      consumes:
      - application/json
      parameters:
      - description: Telegram channel ID
        in: path
        name: TgChannelID
        required: true
        type: integer
      - description: Ad format details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/AddAdFormatRequest'
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Add channel ad format
      tags:
      - channels
  /channels/{TgChannelID}/ad-formats/{formatID}:
    delete:
      parameters:
      - description: Telegram channel ID
        in: path
        name: TgChannelID
        required: true
        type: integer
      - description: Ad format UUID
        in: path
        name: formatID
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Remove channel ad format
      tags:
      - channels
  /channels/{TgChannelID}/admins:
    get:
      parameters:
      - description: Telegram channel ID
        in: path
        name: TgChannelID
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/ChannelAdminsResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get channel admins
      tags:
      - channels
  /channels/{TgChannelID}/listing:
    patch:
      consumes:
      - application/json
      parameters:
      - description: Telegram channel ID
        in: path
        name: TgChannelID
        required: true
        type: integer
      - description: Listing status
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/UpdateListingRequest'
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update channel listing
      tags:
      - channels
  /channels/{TgChannelID}/managers:
    get:
      parameters:
      - description: Telegram channel ID
        in: path
        name: TgChannelID
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/ChannelManagersResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get channel managers
      tags:
      - channels
    post:
      consumes:
      - application/json
      parameters:
      - description: Telegram channel ID
        in: path
        name: TgChannelID
        required: true
        type: integer
      - description: Manager telegram ID
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/AddManagerRequest'
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Add channel manager
      tags:
      - channels
  /channels/{TgChannelID}/managers/{tgID}:
    delete:
      parameters:
      - description: Telegram channel ID
        in: path
        name: TgChannelID
        required: true
        type: integer
      - description: Manager telegram ID
        in: path
        name: tgID
        required: true
        type: integer
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Remove channel manager
      tags:
      - channels
  /me:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/UserResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get current user
      tags:
      - auth
  /mp/channels:
    post:
      consumes:
      - application/json
      parameters:
      - description: Search/sort/filter params
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/MarketplaceChannelsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/MarketplaceChannelsResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: List marketplace channels
      tags:
      - marketplace
  /ton-rates:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/TonRatesResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: Get TON exchange rates
      tags:
      - rates
  /user/name:
    patch:
      consumes:
      - application/json
      parameters:
      - description: New name
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/UpdateNameRequest'
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update user name
      tags:
      - user
  /user/profile:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/ProfileResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user profile
      tags:
      - user
  /user/settings:
    patch:
      consumes:
      - application/json
      parameters:
      - description: Settings to update
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/UpdateSettingsRequest'
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update user settings
      tags:
      - user
securityDefinitions:
  BearerAuth:
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
